{
    "$schema": "<relative path to createFormUI.schema.json>",
    "view": {
        "kind": "Form",
        "properties": {
            "title": "AVS Network Design Guide Click-through experience",
            "steps": [
                {
                    "name": "onprem-connectivity",
                    "label": "Connectivity with on-prem sites",
                    "subLabel": {
                        "preValidation": "Provide deployment prefix for the resource groups and resources that will be created.",
                        "postValidation": "Done"
                    },
                    "bladeTitle": "Connectivity with on-prem sites",
                    "elements": [
                        {
                            "name": "onprem-connectivity-section",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "label": "Select an onprem connectivity option",
                            "elements": [
                                {
                                    "name": "onprem-connectivity-option",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "visible": true,
                                    "label": "Select an onprem connectivity option",
                                    "defaultValue": "ergr",
                                    "toolTip": "",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "ExpressRoute Global Reach",
                                                "value": "ergr"
                                            },
                                            {
                                                "label": "IPSec VPN",
                                                "value": "vpn"
                                            },
                                            {
                                                "label": "Transit over ExpressRoute private peering",
                                                "value": "ertransit"
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        {
                            "name": "ipsec-section",
                            "type": "Microsoft.Common.Section",
                            "visible": "[equals(steps('onprem-connectivity').onprem-connectivity-section.onprem-connectivity-option, 'vpn')]",
                            "label": "Select an IPSec VPN option",
                            "elements": [
                                {
                                    "name": "underlay-option",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "label": "Select the underlay for the IPSec VPN",
                                    "defaultValue": "internet",
                                    "toolTip": "",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Internet",
                                                "value": "internet"
                                            },
                                            {
                                                "label": "ExpressRoute Microsoft Peering",
                                                "value": "ermp"
                                            },
                                            {
                                                "label": "ExpressRoute Private Peering",
                                                "value": "erpp"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "vnet-option",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "label": "Select where you want to host the VPN device in Azure",
                                    "defaultValue": "vnet",
                                    "toolTip": "",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Customer-managed Virtual Network",
                                                "value": "vnet"
                                            },
                                            {
                                                "label": "Virtual WAN Hub",
                                                "value": "vwan"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "device-option",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "label": "Select the underlay for the IPSec VPN",
                                    "defaultValue": "azurevpngateway",
                                    "toolTip": "",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Azure VPN Gateway",
                                                "value": "azurevpngateway"
                                            },
                                            {
                                                "label": "Third-party NVA",
                                                "value": "nva"
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        {
                            "name": "ertransit-section",
                            "type": "Microsoft.Common.Section",
                            "visible": "[equals(steps('onprem-connectivity').onprem-connectivity-section.onprem-connectivity-option, 'ertransit')]",
                            "label": "Select an ExpressRoute transit option",
                            "elements": [
                                {
                                    "name": "ertransit-option",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "label": "Select the ER transit architecture",
                                    "defaultValue": "single-vnet",
                                    "toolTip": "",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Single VNet with supernet advertisment",
                                                "value": "single-vnet"
                                            },
                                            {
                                                "label": "Auxiliary VNet",
                                                "value": "aux-vnet"
                                            }
                                        ]
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "vnet-connectivity",
                    "label": "Connectivity with Azure Virtual Networks",
                    "subLabel": {
                        "preValidation": "preValid",
                        "postValidation": "Done"
                    },
                    "bladeTitle": "Connectivity with Azure Virtual Networks",
                    "elements": [
                        {
                            "name": "vnet-connectivity-section",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "label": "VNet connectivity option",
                            "elements": [
                                {
                                    "name": "vnet-connectivity-section",
                                    "type": "Microsoft.Common.Section",
                                    "visible": true,
                                    "label": "VNet connectivity option",
                                    "elements": [
                                        {
                                            "name": "onprem-connectivity-option",
                                            "type": "Microsoft.Common.RadioButton",
                                            "visible": true,
                                            "label": "Connect AVS Private to VNet"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "internet-inbound-connectivity",
                    "label": "Inbound Internet Connectivity",
                    "subLabel": {
                        "preValidation": "perValid",
                        "postValidation": "Done"
                    },
                    "bladeTitle": "Inbound Internet Connectivity",
                    "elements": []
                },
                {
                    "name": "internet-outbound-connectivity",
                    "label": "Outbound Internet Connectivity",
                    "subLabel": {
                        "preValidation": "perValid",
                        "postValidation": "Done"
                    },
                    "bladeTitle": "Outbound Internet Connectivity",
                    "elements": []
                }
            ]
        },
        "outputs": {
            "parameters": {
                "onprem-connectivity-option": "[steps('onprem-connectivity').onprem-connectivity-section.onprem-connectivity-option]",
                "ipsec-option": "[steps('onprem-connectivity').ipsec-section.underlay-option]"           
            },
            "kind": "Subscription"
        }
    }
}