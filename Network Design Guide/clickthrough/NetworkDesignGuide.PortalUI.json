{
    "$schema": "<relative path to createFormUI.schema.json>",
    "view": {
        "kind": "Form",
        "properties": {
            "title": "AVS Network Design Guide Click-through experience",
            "steps": [
                {
                    "name": "onprem-connectivity",
                    "label": "Connectivity with on-prem sites",
                    "subLabel": {
                        "preValidation": "Provide deployment prefix for the resource groups and resources that will be created.",
                        "postValidation": "Done"
                    },
                    "bladeTitle": "Connectivity with on-prem sites",
                    "elements": [
                        {
                            "name": "onprem-connectivity-infobox",
                            "type": "Microsoft.Common.InfoBox",
                            "options": {
                                "text": "Select an option for onprem connectivity",
                                "style": "Info"
                            }
                        },
                        {
                            "name": "onprem-connectivity-option",
                            "type": "Microsoft.Common.OptionsGroup",
                            "visible": true,
                            "label": "Select an onprem connectivity option",
                            "defaultValue": "ergr",
                            "toolTip": "",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "ExpressRoute Global Reach",
                                        "value": "ergr"
                                    },
                                    {
                                        "label": "IPSec VPN",
                                        "value": "vpn"
                                    },
                                    {
                                        "label": "Transit over ExpressRoute private peering",
                                        "value": "ertransit"
                                    }
                                ]
                            }
                        },
                        {
                            "name": "ipsec-option",
                            "type": "Microsoft.Common.Section",
                            "visible": "[equals(steps('onprem-connectivity').onprem-connectivity-option, 'vpn')]",
                            "label": "Select an IPSec VPN option",
                            "elements": [
                                {
                                    "name": "ipsec-underlay-option",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    
                                    "label": "Select the underlay for the IPSec VPN",
                                    "defaultValue": "internet",
                                    "toolTip": "",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "internet",
                                                "value": "internet"
                                            },
                                            {
                                                "label": "ExpressRoute Microsoft Peering",
                                                "value": "ermp"
                                            },
                                            {
                                                "label": "ExpressRoute Private Peering",
                                                "value": "erpp"
                                            }
                                        ]
                                    }
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        "outputs": {
            "parameters": {
                "onprem-connectivity-option": "[steps('onprem-connectivity').onprem-connectivity-option]",
                "ipsec-option": "[steps('onprem-connectivity').ipsec-option]"           
            },
            "kind": "Subscription"
        }
    }
}